/*! ui.swipe.js | jungho.son@emotion.co.kr */
define(["jquery","slide","inherit"],function($,SlideUI,InheritUtil){"use strict";var SwipeUI=function(scope){this._start={x:0,y:0},this._amount={x:0,y:0},this._pos=0,this._ratio=.1,this._range=0,this._drag=!1,this._scroll=!1,SlideUI.call(this,scope)};return SwipeUI.prototype=InheritUtil.get_prototype(SlideUI),SwipeUI.prototype.constructor=SwipeUI,SwipeUI.prototype.set_event=function(){SlideUI.prototype.set_event.call(this);var owner=this;this._scope.off("touchstart touchmove touchend"),this._scope.on("touchstart","ul.u_slide_content",function(e){return owner._flag.slide||owner.touchstart.call(owner,e),!1}),this._scope.on("touchmove","ul.u_slide_content",function(e){return owner._flag.slide||owner.touchmove.call(owner,e),!1}),this._scope.on("touchend","ul.u_slide_content",function(e){return!owner._flag.slide&&owner._drag&&(owner._flag.slide=!0,owner.touchend.call(owner,e)),!1})},SwipeUI.prototype.touchstart=function(e){"touchstart"==e.type&&e.originalEvent.touches.length<=1&&(this._start.x=e.pageX||e.originalEvent.touches[0].pageX,this._start.y=e.pageY||e.originalEvent.touches[0].pageY,this._scroll=!1,this._flag.auto&&this.stop_autoplay())},SwipeUI.prototype.touchmove=function(e){if("touchmove"==e.type&&e.originalEvent.touches.length<=1){this._amount.x=(e.pageX||e.originalEvent.touches[0].pageX)-this._start.x,this._amount.y=(e.pageY||e.originalEvent.touches[0].pageY)-this._start.y;var x=Math.abs(this._amount.x),y=Math.abs(this._amount.y);if(y>x&&!this._drag||this._scroll)this._drag=!1,this._scroll=!0;else{this._drag=!0,this._scroll=!1;var pos=this._pos+this._amount.x;this._content.css(this._is_css?{transform:"translate3d("+pos+"px,0,0)","-webkit-transform":"translate3d("+pos+"px,0,0)","-moz-transform":"translate3d("+pos+"px,0,0)","-o-transform":"translate3d("+pos+"px,0,0)","-ms-transform":"translate3d("+pos+"px,0,0)"}:{left:pos+"px"})}}},SwipeUI.prototype.touchend=function(e){if("touchend"==e.type&&e.originalEvent.touches.length<=1){if(this._scroll)return this._drag=!1,void(this._flag.slide=!1);var d=this.get_direction();this._drag?this.transition(d):(this._flag.slide=!1,this._flag.auto&&this.autoplay()),this._drag=!1}},SwipeUI.prototype.get_direction=function(){var _r=0;return 0===this._range&&(this._range=this._ratio*this._w),this._amount.x>this._range?_r=1:this._amount.x<-this._range&&(_r=-1),_r},SwipeUI});